(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a0d7f66"],{"0d12":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-input",{attrs:{type:"textarea",name:e.name,placeholder:e.placeholder,maxlength:e.maxlength},model:{value:e.observeValue,callback:function(t){e.observeValue=t},expression:"observeValue"}}),e._v(" "),n("span",{staticClass:"notice-grey"},[e._v(e._s(e.messageMaxlength))])],1)},o=[],a=(n("c5f6"),{name:"TextareaInput",props:{value:{type:String,required:!0},name:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,required:!0},message:{type:String,default:function(){return""}},maxlength:{type:[Number,String],default:""}},computed:{observeValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},messageMaxlength:function(){return this.maxlength>0?"".concat(this.message?this.message+", ":"","字數限制：").concat(this.observeValue.length,"/").concat(this.maxlength):this.message}}}),i=a,l=n("2877"),s=Object(l["a"])(i,r,o,!1,null,null,null);t["a"]=s.exports},7961:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"30px"}},[e._m(0),e._v(" "),n("StatusHooksTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{hooks:e.hooks,cols:e.cols},on:{editHook:e.editHookHandler,enableHook:e.enableHookHandler,testHook:e.testHookHandler}}),e._v(" "),e.showDialog?n("DialogEditHook",{attrs:{"show-dialog":e.showDialog,"edit-hook-data":e.editHookData},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},update:e.updateHookHandler}}):e._e(),e._v(" "),e.showDialogTestHook?n("DialogTestHookNotification",{attrs:{"show-dialog":e.showDialogTestHook},on:{"update:showDialog":function(t){e.showDialogTestHook=t},"update:show-dialog":function(t){e.showDialogTestHook=t},sendTestNotification:e.sendTestNotificaionHandler}}):e._e()],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{with:"100%"}},[n("div",{staticStyle:{display:"flex",position:"relative"}},[n("h2",[e._v("行程狀態通知設定")])])])}],a=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),i=n("bd86"),l=n("2f62"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{attrs:{data:e.hooks}},[e._l(e.cols,(function(t,r){return n("el-table-column",{key:r,attrs:{label:t.label,sortable:t.sortable,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return["isEnable"===t.scope?n("div",[n("i",{class:"1"===r.row["isEnable"]?"el-icon-success":"el-icon-error",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableHook(r.row)}}})]):n("h4",{staticStyle:{color:"gray"}},[e._v("\n        "+e._s(r.row[t.scope])+"\n      ")])]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"12px12px"},attrs:{type:"primary"},on:{click:function(n){return e.editHook(t.row)}}},[e._v("編輯")]),e._v(" "),n("el-button",{staticStyle:{padding:"12px12px"},attrs:{type:"primary"},on:{click:function(n){return e.testHook(t.row)}}},[e._v("測試")])]}}])})],2)},u=[],c={name:"StatusHooksTable",props:{cols:{type:Array,required:!0},hooks:{type:Array,required:!0}},methods:{editHook:function(e){this.$emit("editHook",e)},enableHook:function(e){this.$emit("enableHook",e)},testHook:function(e){this.$emit("testHook",e)}}},p=c,d=(n("91b1"),n("2877")),h=Object(d["a"])(p,s,u,!1,null,"43d8140a",null),m=h.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"編輯行程狀態推播",visible:!0,direction:"btt","before-close":e.handleClose,width:"800px"}},[n("el-form",{ref:"ruleForm",staticStyle:{width:"80%","margin-left":"5%"},attrs:{model:e.hookData,"label-position":"left","label-width":"15%",rules:e.hookRules}},[e._l(e.fields,(function(t){return n(t.type,{key:t.name,tag:"component",attrs:{placeholder:t.placeholder,name:t.name,label:t.label,disabled:t.disabled,options:t.options,maxlength:t.maxlength},model:{value:e.hookData[t.name],callback:function(n){e.$set(e.hookData,t.name,n)},expression:"hookData[field.name]"}})})),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("儲存")]),e._v(" "),n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2),e._v(" "),n("div",[n("ul",[n("li",[e._v("{date} 預約日期")]),e._v(" "),n("li",[e._v("{driver} 司機名稱")])])])],1)},b=[],g=(n("7f7f"),n("e94b")),v=n("0d12"),k={name:"DialogEditPush",components:{TextInput:g["a"],TextareaInput:v["a"]},props:{showDialog:{type:Boolean,required:!0},editHookData:{type:Object,default:function(){}}},data:function(){var e=[{type:"TextInput",name:"id",value:"",label:"id",placeholder:"",disabled:!0,rules:[{required:!0,trigger:"blur"}]},{type:"TextInput",name:"state",value:"",label:"行程狀態",placeholder:"",disabled:!0,rules:[{required:!0,message:"",trigger:"blur"}]},{type:"TextInput",name:"title",value:"",label:"推播標題",placeholder:"",maxlength:20,rules:[{required:!1,message:"請填寫推播標題",trigger:"blur"}]},{type:"TextareaInput",name:"message",value:"",label:"推播內容",placeholder:"請輸入網址",maxlength:50,rules:[{required:!1,message:"請填寫推播內容",trigger:"blur"}]}],t=e.reduce((function(e,t){return e[t.name]=t.value,e}),{}),n=e.reduce((function(e,t){return e[t.name]=t.rules,e}),{});return{fields:e,hookRules:n,hookData:t}},mounted:function(){this.hookData=Object.assign({},this.editHookData)},methods:{handleClose:function(){this.$emit("update:showDialog",!1)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("update",t.hookData)}))},resetForm:function(e){this.$refs[e].resetFields()}}},y=k,w=Object(d["a"])(y,f,b,!1,null,null,null),_=w.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"測試行程推播",visible:!0,direction:"btt","before-close":e.handleClose,width:"800px"}},[n("el-form",{ref:"ruleForm",staticStyle:{width:"80%","margin-left":"5%"},attrs:{model:e.testData,"label-position":"left","label-width":"15%",rules:e.hookRules}},[e._l(e.fields,(function(t){return n(t.type,{key:t.name,tag:"component",attrs:{placeholder:t.placeholder,name:t.name,label:t.label,disabled:t.disabled,options:t.options,maxlength:t.maxlength},model:{value:e.testData[t.name],callback:function(n){e.$set(e.testData,t.name,n)},expression:"testData[field.name]"}})})),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("發送")]),e._v(" "),n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)},x=[];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S="AppSettings",T={name:"DialogTestHookNotification",components:{TextInput:g["a"]},props:{showDialog:{type:Boolean,required:!0}},data:function(){var e=[{type:"TextInput",name:"mobile",value:Object({VUE_APP_BASE_API:"https://edm.callcarbar.com.tw",NODE_ENV:"production",BASE_URL:""}).VUE_APP_RESERVATION_TESTER_MOBILE||"",label:"測試帳號",placeholder:"請填寫測試帳號手機號碼",rules:[{required:!0,message:"請填寫測試帳號手機號碼",trigger:"blur"}]},{type:"TextInput",name:"orderID",value:"",label:"訂單編號",placeholder:"請填寫訂單編號",rules:[{required:!0,message:"請填寫訂單編號",trigger:"blur"}]},{type:"TextInput",name:"driverName",value:"",label:"司機名稱",placeholder:"請填寫司機名稱"},{type:"TextInput",name:"driverMobile",value:"",label:"司機電話",placeholder:"請填寫司機電話"}],t=e.reduce((function(e,t){return e[t.name]=t.value,e}),{}),n=e.reduce((function(e,t){return e[t.name]=t.rules,e}),{});return{fields:e,testData:t,hookRules:n}},computed:H({},Object(l["c"])(S,{loading:"IS_LOADING"})),methods:{handleClose:function(){this.$emit("update:showDialog",!1)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("sendTestNotification",t.testData)}))},resetForm:function(e){this.$refs[e].resetFields()}}},E=T,j=Object(d["a"])(E,O,x,!1,null,null,null),R=j.exports;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P="AppSettings",A=[{label:"行程狀態",scope:"state"},{label:"推播標題",scope:"title"},{label:"推播內容",scope:"message"},{label:"啟用",scope:"isEnable"}],N={name:"ReservationStatusHooks",components:{StatusHooksTable:m,DialogEditHook:_,DialogTestHookNotification:R},data:function(){return{hooks:[],cols:A,showDialog:!1,showDialogTestHook:!1,editHookData:{}}},computed:I({},Object(l["c"])(P,{loading:"IS_LOADING"})),mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getReservationStatusHooks();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getReservationStatusHooks:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("".concat(P,"/GET_RESERVATION_STATUS_HOOKS"));case 2:this.hooks=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editHookHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editHookData=t,this.showDialog=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateHookHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("".concat(P,"/UPDATE_RESERVATION_STATUS_HOOKS"),t);case 2:n=e.sent,n&&(r=this.hooks.indexOf(this.editHookData),this.$set(this.hooks,r,t),this.showDialog=!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),enableHookHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="1"===t.isEnable?"0":"1",e.next=3,this.$store.dispatch("".concat(P,"/UPDATE_RESERVATION_STATUS_HOOKS"),I({},t,{isEnable:n}));case 3:r=e.sent,r&&(t.isEnable=n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),testHookHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editHookData=t,this.showDialogTestHook=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendTestNotificaionHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch("".concat(P,"/TEST_RESERVATION_STATUE_CHANGE"),I({},t,{stateID:this.editHookData.id}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},q=N,V=Object(d["a"])(q,r,o,!1,null,null,null);t["default"]=V.exports},"84f8":function(e,t,n){},"91b1":function(e,t,n){"use strict";var r=n("84f8"),o=n.n(r);o.a},e94b:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-input",{attrs:{type:"text",name:e.name,placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled},model:{value:e.observeValue,callback:function(t){e.observeValue=t},expression:"observeValue"}}),e._v(" "),n("span",{staticClass:"notice-grey"},[e._v(e._s(e.messageMaxlength))])],1)},o=[],a=(n("c5f6"),{name:"TextInput",props:{value:{type:[String,Number],required:!0},name:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,required:!0},message:{type:String,default:function(){return""}},maxlength:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1}},computed:{observeValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},messageMaxlength:function(){return this.maxlength>0?"".concat(this.message?this.message+", ":"","字數限制：").concat(this.observeValue.length,"/").concat(this.maxlength):this.message}}}),i=a,l=n("2877"),s=Object(l["a"])(i,r,o,!1,null,null,null);t["a"]=s.exports}}]);