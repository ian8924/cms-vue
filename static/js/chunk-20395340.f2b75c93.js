(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20395340"],{"01bd":function(e,t,n){"use strict";var r=n("5d58"),i=n.n(r),a=n("67bb"),o=n.n(a);function s(e){return s="function"===typeof o.a&&"symbol"===typeof i.a?function(e){return typeof e}:function(e){return e&&"function"===typeof o.a&&e.constructor===o.a&&e!==o.a.prototype?"symbol":typeof e},s(e)}n.d(t,"a",(function(){return u}));var c=Object.prototype.hasOwnProperty;function u(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==s(e))return!0;for(var t in e)if(c.call(e,t))return!1;return!0}},"02f4":function(e,t,n){var r=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(a=s.charCodeAt(c),a<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):a:e?s.slice(c,c+2):o-56320+(a-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d12":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-input",{attrs:{type:"textarea",name:e.name,placeholder:e.placeholder,maxlength:e.maxlength},model:{value:e.observeValue,callback:function(t){e.observeValue=t},expression:"observeValue"}}),e._v(" "),n("span",{staticClass:"notice-grey"},[e._v(e._s(e.messageMaxlength))])],1)},i=[],a=(n("c5f6"),{name:"TextareaInput",props:{value:{type:String,required:!0},name:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,required:!0},message:{type:String,default:function(){return""}},maxlength:{type:[Number,String],default:""}},computed:{observeValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},messageMaxlength:function(){return this.maxlength>0?"".concat(this.message?this.message+", ":"","字數限制：").concat(this.observeValue.length,"/").concat(this.maxlength):this.message}}}),o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},1134:function(e,t,n){"use strict";var r=n("e549"),i=n.n(r);i.a},"1af6":function(e,t,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),a=n("79e5"),o=n("be13"),s=n("2b4c"),c=n("520a"),u=s("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),d=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=d?!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[p](""),!t})):void 0;if(!d||!h||"replace"===e&&!l||"split"===e&&!f){var g=/./[p],v=n(o,p,""[e],(function(e,t,n,r,i){return t.exec===c?d&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),b=v[0],m=v[1];r(String.prototype,e,b),i(RegExp.prototype,p,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},"28a5":function(e,t,n){"use strict";var r=n("aae3"),i=n("cb7c"),a=n("ebd6"),o=n("0390"),s=n("9def"),c=n("5f1b"),u=n("520a"),l=n("79e5"),f=Math.min,p=[].push,d="split",h="length",g="lastIndex",v=4294967295,b=!l((function(){RegExp(v,"y")}));n("214f")("split",2,(function(e,t,n,l){var m;return m="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);var a,o,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,d=void 0===t?v:t>>>0,b=new RegExp(e.source,l+"g");while(a=u.call(b,i)){if(o=b[g],o>f&&(c.push(i.slice(f,a.index)),a[h]>1&&a.index<i[h]&&p.apply(c,a.slice(1)),s=a[0][h],f=o,c[h]>=d))break;b[g]===a.index&&b[g]++}return f===i[h]?!s&&b.test("")||c.push(""):c.push(i.slice(f)),c[h]>d?c.slice(0,d):c}:"0"[d](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,r):m.call(String(i),n,r)},function(e,t){var r=l(m,e,this,t,m!==n);if(r.done)return r.value;var u=i(e),p=String(this),d=a(u,RegExp),h=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"y":"g"),y=new d(b?u:"^(?:"+u.source+")",g),x=void 0===t?v:t>>>0;if(0===x)return[];if(0===p.length)return null===c(y,p)?[p]:[];var w=0,S=0,O=[];while(S<p.length){y.lastIndex=b?S:0;var _,D=c(y,b?p:p.slice(S));if(null===D||(_=f(s(y.lastIndex+(b?0:S)),p.length))===w)S=o(p,S,h);else{if(O.push(p.slice(w,S)),O.length===x)return O;for(var I=1;I<=D.length-1;I++)if(O.push(D[I]),O.length===x)return O;S=w=_}}return O.push(p.slice(w)),O}]}))},"469f":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("7d7b")},"520a":function(e,t,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,a=String.prototype.replace,o=i,s="lastIndex",c=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[s]||0!==t[s]}(),u=void 0!==/()??/.exec("")[1],l=c||u;l&&(o=function(e){var t,n,o,l,f=this;return u&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),c&&(t=f[s]),o=i.call(f,e),c&&o&&(f[s]=f.global?o.index+o[0].length:t),u&&o&&o.length>1&&a.call(o[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o}),e.exports=o},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"5d58":function(e,t,n){e.exports=n("d8d6")},"5d73":function(e,t,n){e.exports=n("469f")},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var a=n.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"67bb":function(e,t,n){e.exports=n("f921")},"768b":function(e,t,n){"use strict";var r=n("a745"),i=n.n(r);function a(e){if(i()(e))return e}var o=n("5d73"),s=n.n(o),c=n("c8bb"),u=n.n(c);function l(e,t){if(u()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=s()(e);!(r=(o=c.next()).done);r=!0)if(n.push(o.value),t&&n.length===t)break}catch(l){i=!0,a=l}finally{try{r||null==c["return"]||c["return"]()}finally{if(i)throw a}}return n}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){return a(e)||l(e,t)||f()}n.d(t,"a",(function(){return p}))},"7b0c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-select",{attrs:{name:e.name,placeholder:e.placeholder},model:{value:e.observeValue,callback:function(t){e.observeValue=t},expression:"observeValue"}},e._l(e.options,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})})),1)],1)},i=[],a={name:"SelectInput",props:{value:{type:String,required:!0},name:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,required:!0},message:{type:String,default:function(){return""}},options:{type:Array,required:!0}},computed:{observeValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},"7d7b":function(e,t,n){var r=n("e4ae"),i=n("7cd6");e.exports=n("584a").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"95d5":function(e,t,n){var r=n("40c3"),i=n("5168")("iterator"),a=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},a481:function(e,t,n){"use strict";var r=n("cb7c"),i=n("4bf8"),a=n("9def"),o=n("4588"),s=n("0390"),c=n("5f1b"),u=Math.max,l=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,(function(e,t,n,g){return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},function(e,t){var i=g(n,e,this,t);if(i.done)return i.value;var f=r(e),p=String(this),d="function"===typeof t;d||(t=String(t));var b=f.global;if(b){var m=f.unicode;f.lastIndex=0}var y=[];while(1){var x=c(f,p);if(null===x)break;if(y.push(x),!b)break;var w=String(x[0]);""===w&&(f.lastIndex=s(p,a(f.lastIndex),m))}for(var S="",O=0,_=0;_<y.length;_++){x=y[_];for(var D=String(x[0]),I=u(l(o(x.index),p.length),0),N=[],T=1;T<x.length;T++)N.push(h(x[T]));var E=x.groups;if(d){var k=[D].concat(N,I,p);void 0!==E&&k.push(E);var j=String(t.apply(void 0,k))}else j=v(D,p,I,N,E,t);I>=O&&(S+=p.slice(O,I)+j,O=I+D.length)}return S+p.slice(O)}];function v(e,t,r,a,o,s){var c=r+e.length,u=a.length,l=d;return void 0!==o&&(o=i(o),l=p),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var p=f(l/10);return 0===p?n:p<=u?void 0===a[p-1]?i.charAt(1):a[p-1]+i.charAt(1):n}s=a[l-1]}return void 0===s?"":s}))}}))},a745:function(e,t,n){e.exports=n("f410")},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},c8bb:function(e,t,n){e.exports=n("54a1")},e549:function(e,t,n){},e94b:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-input",{attrs:{type:"text",name:e.name,placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled},model:{value:e.observeValue,callback:function(t){e.observeValue=t},expression:"observeValue"}}),e._v(" "),n("span",{staticClass:"notice-grey"},[e._v(e._s(e.messageMaxlength))])],1)},i=[],a=(n("c5f6"),{name:"TextInput",props:{value:{type:[String,Number],required:!0},name:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,required:!0},message:{type:String,default:function(){return""}},maxlength:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1}},computed:{observeValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},messageMaxlength:function(){return this.maxlength>0?"".concat(this.message?this.message+", ":"","字數限制：").concat(this.observeValue.length,"/").concat(this.maxlength):this.message}}}),o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray},f912:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"30px"}},[n("div",{staticStyle:{with:"100%"}},[n("div",{staticStyle:{display:"flex",position:"relative"}},[n("h2",[e._v("推播管理")]),e._v(" "),n("div",{staticStyle:{position:"absolute",right:"15%"}},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus",round:""},on:{click:e.addNotification}},[e._v("新增推播")]),e._v(" "),n("el-button",{attrs:{type:"info",icon:e.refreshIcon,round:""},on:{click:e.getNotificationList}},[e._v("刷新列表")])],1)])]),e._v(" "),n("div",{staticStyle:{"margin-bottom":"20px"}},[n("el-pagination",{attrs:{background:"","page-sizes":[5,10,20,100,e.notificationList.length],"current-page":e.currentPage,"page-size":e.pagesize,total:e.notificationList.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.notificationList.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),"default-sort":{prop:"id",order:"descending"}}},[e._l(e.cols,(function(t,r){return n("el-table-column",{key:r,attrs:{label:t.label,sortable:t.sortable,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return["isEnable"===t.scope?n("div",[n("i",{directives:[{name:"permission",rawName:"v-permission",value:["EDM-查看者"],expression:"['EDM-查看者']"}],class:"1"===r.row["isEnable"]?"el-icon-success":"el-icon-error",staticStyle:{cursor:"pointer"}}),e._v(" "),n("i",{directives:[{name:"permission",rawName:"v-permission",value:["EDM-編輯者"],expression:"['EDM-編輯者']"}],class:"1"===r.row["isEnable"]?"el-icon-success":"el-icon-error",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableNotification(r.row)}}})]):n("h4",{staticStyle:{color:"gray"}},[e._v("\n          "+e._s(r.row[t.scope])+"\n        ")])]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["EDM-編輯者"],expression:"['EDM-編輯者']"}],staticStyle:{padding:"12px12px"},attrs:{type:"primary"},on:{click:function(n){return e.editNotification(t.row)}}},[e._v("\n          編輯")])]}}])})],2),e._v(" "),e.showDialog?n("DialogEditPush",{attrs:{"show-dialog":e.showDialog,"is-add-notification":e.isAddNotification,"edit-notification-data":e.editNotificationData},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},update:e.updateNotification,post:e.postNotification}}):e._e()],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),o=n("bd86"),s=n("2f62"),c=n("b775"),u=n("01bd"),l=function(){return{namespaced:!0,state:{isLoading:!1},getters:{IS_LOADING:function(e){return e.isLoading}},mutations:{SET_IS_LOADING:function(e){e.isLoading=!e.isLoading}},actions:{GET_NOTIFICATION_LIST:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.getters,r=t.commit,!n.IS_LOADING){e.next=3;break}return e.abrupt("return",[]);case 3:return r("SET_IS_LOADING"),e.next=6,Object(c["a"])({url:"/v1/push",method:"get"}).then((function(e){return e.data})).catch((function(){return[]}));case 6:return i=e.sent,r("SET_IS_LOADING"),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),POST_NOTIFICATION:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({url:"/v1/push",method:"post",data:n}).then((function(e){return e.data})).catch((function(){}));case 2:return r=e.sent,e.abrupt("return",!Object(u["a"])(r));case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),UPDATE_NOTIFICATION:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getters,i=t.commit,!r.IS_LOADING){e.next=3;break}return e.abrupt("return",!1);case 3:return i("SET_IS_LOADING"),a=n.id,e.next=7,Object(c["a"])({url:"/v1/push/".concat(a),method:"put",data:n}).then((function(e){return e.data})).catch((function(){}));case 7:return o=e.sent,i("SET_IS_LOADING"),e.abrupt("return",!Object(u["a"])(o));case 10:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}}},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.isAddNotification?"新增推播":"編輯推播",visible:!0,direction:"btt","before-close":e.handleClose,width:"800px"}},[n("el-form",{ref:"ruleForm",staticStyle:{width:"80%","margin-left":"5%"},attrs:{model:e.notificationData,"label-position":"left","label-width":"15%",rules:e.notificationRules}},[e._l(e.fields,(function(t){return n(t.type,{key:t.name,tag:"component",attrs:{placeholder:t.placeholder,name:t.name,label:t.label,disabled:t.disabled,options:t.options,maxlength:t.maxlength},model:{value:e.notificationData[t.name],callback:function(n){e.$set(e.notificationData,t.name,n)},expression:"notificationData[field.name]"}})})),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.isAddNotification?"新增推播":"儲存推播"))]),e._v(" "),n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)},p=[],d=(n("7f7f"),n("7b0c")),h=n("e94b"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:e.label,prop:e.name}},[n("el-date-picker",{attrs:{type:"date","value-format":e.dateFormat,clearable:!1},model:{value:e.observeDate,callback:function(t){e.observeDate=t},expression:"observeDate"}}),e._v(" "),n("el-time-picker",{attrs:{"value-format":e.timeFormat,clearable:!1},model:{value:e.observeTime,callback:function(t){e.observeTime=t},expression:"observeTime"}})],1)},v=[],b=(n("a481"),n("28a5"),n("768b")),m={name:"DatetimePicker",props:{value:{type:String,required:!0},name:{type:String,required:!0},label:{type:String,required:!0},message:{type:String,default:function(){return""}},dateFormat:{type:String,default:"yyyy-MM-dd"},timeFormat:{type:String,default:"HH:mm:ss"}},computed:{observeDate:{get:function(){var e=this.value.split(" "),t=Object(b["a"])(e,1),n=t[0];return n||""},set:function(e){this.$emit("input","".concat(e," ").concat(this.observeTime))}},observeTime:{get:function(){var e=this.value.split(" "),t=Object(b["a"])(e,2),n=t[1];return n||""},set:function(e){this.$emit("input","".concat(this.observeDate," ").concat(e))}}},mounted:function(){this.initValue()},methods:{initValue:function(){var e,t,n=new Date;if(this.observeTime)t=this.observeTime;else{var r=[n.getHours(),n.getMinutes(),n.getSeconds()],i=r[0],a=r[1],o=r[2];t=this.timeFormat.replace(/HH/,(i>9?"":"0")+i).replace(/mm/,(a>9?"":"0")+a).replace(/ss/,(o>9?"":"0")+o)}if(this.observeDate)e=this.observeDate;else{var s=[n.getFullYear(),n.getMonth()+1,n.getDate()],c=s[0],u=s[1],l=s[2];e=this.dateFormat.replace(/yyyy/,c).replace(/MM/,(u>9?"":"0")+u).replace(/dd/,(l>9?"":"0")+l)}this.$emit("input","".concat(e," ").concat(t))}}},y=m,x=n("2877"),w=Object(x["a"])(y,g,v,!1,null,null,null),S=w.exports,O=n("0d12"),_={name:"DialogEditPush",components:{TextInput:h["a"],SelectInput:d["a"],DatetimePicker:S,TextareaInput:O["a"]},props:{isAddNotification:{type:Boolean,required:!0},showDialog:{type:Boolean,required:!0},editNotificationData:{type:Object,default:function(){}}},data:function(){var e=function(e,t,n){var r=/[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}/;r.test(t)?n():n(new Error)},t=[{type:"TextInput",name:"title",value:"",label:"標題",placeholder:"請輸入標題",maxlength:20,rules:[{required:!0,message:"請填寫推播標題",trigger:"blur"}]},{type:"TextareaInput",name:"message",value:"",label:"訊息內容",placeholder:"",maxlength:100,rules:[{required:!0,message:"請填寫推播內容",trigger:"blur"}]},{type:"TextInput",name:"link",value:"",label:"URL",placeholder:"請輸入網址",rules:[{required:!0,message:"請填寫推播連結",trigger:"blur"}]},{type:"DatetimePicker",name:"notificationTime",value:"",label:"通知時間",placeholder:"選擇日期",rules:[{required:!0,message:"請選擇推播時間",trigger:"blur",validator:e}]},{type:"SelectInput",name:"infoType",value:"",label:"推播類型",placeholder:"",options:[{name:"通知",value:"通知"},{name:"優惠",value:"優惠"}],rules:[{required:!0,message:"請選擇推播類型",trigger:"blur"}]}];this.isAddNotification||t.unshift({type:"TextInput",name:"id",value:"",label:"id",placeholder:"",disabled:!0,rules:[{required:!this.isAddNotification,trigger:"blur"}]});var n=t.reduce((function(e,t){return e[t.name]=t.value,e}),{}),r=t.reduce((function(e,t){return e[t.name]=t.rules,e}),{});return{fields:t,notificationRules:r,notificationData:n}},mounted:function(){this.isAddNotification||(this.notificationData=Object.assign({},this.editNotificationData))},methods:{handleClose:function(){var e=this;this.isAddNotification?this.$confirm("確認關閉？").then((function(t){e.$emit("update:showDialog",!1)})).catch((function(e){})):this.$emit("update:showDialog",!1)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var n=t.isAddNotification?"post":"update";t.$emit(n,t.notificationData)}))},resetForm:function(e){this.$refs[e].resetFields()}}},D=_,I=Object(x["a"])(D,f,p,!1,null,null,null),N=I.exports;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=[{label:"id",scope:"id",sortable:!1},{label:"標題",scope:"title",sortable:!1},{label:"訊息內容",scope:"message",sortable:!1},{label:"網址連結",scope:"link",sortable:!1},{label:"推播時間",scope:"notificationTime",sortable:!1},{label:"推播類型",scope:"infoType",sortable:!1},{label:"啟用狀態",scope:"isEnable",sortable:!1},{label:"建立時間",scope:"applyTime",sortable:!1},{label:"已讀數量",scope:"views",sortable:!1}],j={name:"Notification",components:{DialogEditPush:N},data:function(){return{notificationList:[],cols:k,isRefresh:!1,showDialog:!1,isAddNotification:!1,editNotificationData:{},currentPage:1,pagesize:20}},computed:E({refreshIcon:function(){return this.isRefresh?"el-icon-loading":"el-icon-refresh"}},Object(s["c"])("notification",{loading:"IS_LOADING"})),created:function(){void 0===this.$store._modules.root._children["notification"]&&this.$store.registerModule("notification",l()),this.getNotificationList()},beforeDestroy:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:void 0!==this.$store._modules.root._children["notification"]&&this.$store.unregisterModule("notification");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getNotificationList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isRefresh=!0,e.next=3,this.$store.dispatch("notification/GET_NOTIFICATION_LIST");case 3:this.notificationList=e.sent,this.notificationList.reverse(),this.isRefresh=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addNotification:function(){this.isAddNotification=!0,this.showDialog=!0},editNotification:function(e){e&&(this.editNotificationData=e,this.isAddNotification=!1,this.showDialog=!0)},postNotification:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("notification/POST_NOTIFICATION",t);case 2:if(n=e.sent,!n){e.next=7;break}return e.next=6,this.getNotificationList();case 6:this.showDialog=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateNotification:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("notification/UPDATE_NOTIFICATION",t);case 2:n=e.sent,n&&(this.showDialog=!1,r=this.notificationList.indexOf(this.editNotificationData),this.$set(this.notificationList,r,t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),enableNotification:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="1"===t.isEnable?"0":"1",e.next=3,this.$store.dispatch("notification/UPDATE_NOTIFICATION",E({},t,{isEnable:n}));case 3:r=e.sent,r&&(t.isEnable=n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e}}},A=j,$=(n("1134"),Object(x["a"])(A,r,i,!1,null,"27799587",null));t["default"]=$.exports}}]);